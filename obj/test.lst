   1                 	;;;-----------------------------------------
   2                 	;;; Start MC68HC11 gcc assembly output
   3                 	;;; gcc compiler 3.0.4 m68hc1x-20020922
   4                 	;;; Command:	cc1 -lang-c -I\alan\play\hc11\presto -I. -iprefix c:\programs\hc11\gnu-m6811-elf\bin\.
   5                 	;;; Compiled:	Thu Oct 10 23:49:34 2002
   6                 	;;; (META)compiled by GNU C version 2.95.2 19991024 (release).
   7                 	;;;-----------------------------------------
   8                 		.file	"test.c"
   9                 		.mode mshort
  10                 		.globl	one_tid
  11                 		.sect	.data
  12                 		.type	one_tid,@object
  13                 		.size	one_tid,1
  14                 	one_tid:
  15 0000 00          		.byte	0
  16                 		.globl	two_tid
  17                 		.type	two_tid,@object
  18                 		.size	two_tid,1
  19                 	two_tid:
  20 0001 00          		.byte	0
  21                 		.globl	three_tid
  22                 		.type	three_tid,@object
  23                 		.size	three_tid,1
  24                 	three_tid:
  25 0002 00          		.byte	0
  26                 		.globl	four_tid
  27                 		.type	four_tid,@object
  28                 		.size	four_tid,1
  29                 	four_tid:
  30 0003 00          		.byte	0
  31                 		.globl	light1
  32                 		.type	light1,@object
  33                 		.size	light1,1
  34                 	light1:
  35 0004 00          		.byte	0
  36                 		.globl	light2
  37                 		.type	light2,@object
  38                 		.size	light2,1
  39                 	light2:
  40 0005 00          		.byte	0
  41                 		.globl	light3
  42                 		.type	light3,@object
  43                 		.size	light3,1
  44                 	light3:
  45 0006 00          		.byte	0
  46                 		.globl	light4
  47                 		.type	light4,@object
  48                 		.size	light4,1
  49                 	light4:
  50 0007 00          		.byte	0
  51                 		.sect	.text
  52                 		.globl	assert_lights
  53                 		.type	assert_lights,@function
  54                 	assert_lights:
  55 0000 34          		des
  56 0001 F6 00 00    		ldab	light1
  57 0004 FA 00 00    		orab	light2
  58 0007 FA 00 00    		orab	light3
  59 000a FA 00 00    		orab	light4
  60 000d CA F0       		orab	#240
  61 000f 30          		tsx
  62 0010 E7 00       		stab	0,x
  63 0012 E6 00       		ldab	0,x
  64 0014 CE 7F FF    		ldx	#32767
  65 0017 E7 00       		stab	0,x
  66 0019 31          		ins
  67 001a 39          		rts
  68                 	.Lfe1:
  69                 		.size	assert_lights,.Lfe1-assert_lights
  70                 		; extern	presto_timer
  71                 		; extern	presto_wait_for_message
  72                 		.globl	One
  73                 		.type	One,@function
  74                 	One:
  75 001b 3C          		pshx
  76 001c 3C          		pshx
  77 001d 18 30       		tsy
  78 001f 4F          		clra
  79 0020 5F          		clrb
  80 0021 18 ED 02    		std	2,y
  81 0024 4F          		clra
  82 0025 5F          		clrb
  83 0026 18 ED 00    		std	0,y
  84                 	.L5:
  85 0029 F6 00 00    		ldab	light1
  86 002c C8 01       		eorb	#1
  87 002e F7 00 00    		stab	light1
  88 0031 8D CD       		bsr	assert_lights
  89 0033 18 30       		tsy
  90 0035 18 EC 02    		ldd	2,y
  91 0038 37          		pshb
  92 0039 36          		psha
  93 003a 18 EC 00    		ldd	0,y
  94 003d 37          		pshb
  95 003e 36          		psha
  96 003f CE 13 88    		ldx	#5000
  97 0042 3C          		pshx
  98 0043 F6 00 00    		ldab	one_tid
  99 0046 BD 00 00    		bsr	presto_timer
 100 0049 18 38       		puly
 101 004b 18 38       		puly
 102 004d 18 38       		puly
 103 004f 8F          		xgdx
 104 0050 30          		tsx
 105 0051 8F          		xgdx
 106 0052 BD 00 00    		bsr	presto_wait_for_message
 107 0055 20 D2       		bra	.L5
 108                 	.Lfe2:
 109                 		.size	One,.Lfe2-One
 110                 		.globl	Two
 111                 		.type	Two,@function
 112                 	Two:
 113 0057 3C          		pshx
 114 0058 3C          		pshx
 115 0059 18 30       		tsy
 116 005b 4F          		clra
 117 005c 5F          		clrb
 118 005d 18 ED 02    		std	2,y
 119 0060 4F          		clra
 120 0061 5F          		clrb
 121 0062 18 ED 00    		std	0,y
 122                 	.L9:
 123 0065 F6 00 00    		ldab	light2
 124 0068 C8 02       		eorb	#2
 125 006a F7 00 00    		stab	light2
 126 006d 8D 91       		bsr	assert_lights
 127 006f 18 30       		tsy
 128 0071 18 EC 02    		ldd	2,y
 129 0074 37          		pshb
 130 0075 36          		psha
 131 0076 18 EC 00    		ldd	0,y
 132 0079 37          		pshb
 133 007a 36          		psha
 134 007b CE 02 58    		ldx	#600
 135 007e 3C          		pshx
 136 007f F6 00 00    		ldab	two_tid
 137 0082 BD 00 00    		bsr	presto_timer
 138 0085 18 38       		puly
 139 0087 18 38       		puly
 140 0089 18 38       		puly
 141 008b 8F          		xgdx
 142 008c 30          		tsx
 143 008d 8F          		xgdx
 144 008e BD 00 00    		bsr	presto_wait_for_message
 145 0091 20 D2       		bra	.L9
 146                 	.Lfe3:
 147                 		.size	Two,.Lfe3-Two
 148                 		.globl	Three
 149                 		.type	Three,@function
 150                 	Three:
 151 0093 3C          		pshx
 152 0094 3C          		pshx
 153 0095 18 30       		tsy
 154 0097 4F          		clra
 155 0098 5F          		clrb
 156 0099 18 ED 02    		std	2,y
 157 009c 4F          		clra
 158 009d 5F          		clrb
 159 009e 18 ED 00    		std	0,y
 160                 	.L13:
 161 00a1 F6 00 00    		ldab	light3
 162 00a4 C8 04       		eorb	#4
 163 00a6 F7 00 00    		stab	light3
 164 00a9 BD 00 00    		bsr	assert_lights
 165 00ac 18 30       		tsy
 166 00ae 18 EC 02    		ldd	2,y
 167 00b1 37          		pshb
 168 00b2 36          		psha
 169 00b3 18 EC 00    		ldd	0,y
 170 00b6 37          		pshb
 171 00b7 36          		psha
 172 00b8 CE 03 E8    		ldx	#1000
 173 00bb 3C          		pshx
 174 00bc F6 00 00    		ldab	three_tid
 175 00bf BD 00 00    		bsr	presto_timer
 176 00c2 18 38       		puly
 177 00c4 18 38       		puly
 178 00c6 18 38       		puly
 179 00c8 8F          		xgdx
 180 00c9 30          		tsx
 181 00ca 8F          		xgdx
 182 00cb BD 00 00    		bsr	presto_wait_for_message
 183 00ce 20 D1       		bra	.L13
 184                 	.Lfe4:
 185                 		.size	Three,.Lfe4-Three
 186                 		.globl	Four
 187                 		.type	Four,@function
 188                 	Four:
 189 00d0 3C          		pshx
 190 00d1 3C          		pshx
 191 00d2 18 30       		tsy
 192 00d4 4F          		clra
 193 00d5 5F          		clrb
 194 00d6 18 ED 02    		std	2,y
 195 00d9 4F          		clra
 196 00da 5F          		clrb
 197 00db 18 ED 00    		std	0,y
 198                 	.L17:
 199 00de F6 00 00    		ldab	light4
 200 00e1 C8 08       		eorb	#8
 201 00e3 F7 00 00    		stab	light4
 202 00e6 BD 00 00    		bsr	assert_lights
 203 00e9 18 30       		tsy
 204 00eb 18 EC 02    		ldd	2,y
 205 00ee 37          		pshb
 206 00ef 36          		psha
 207 00f0 18 EC 00    		ldd	0,y
 208 00f3 37          		pshb
 209 00f4 36          		psha
 210 00f5 CE 04 B0    		ldx	#1200
 211 00f8 3C          		pshx
 212 00f9 F6 00 00    		ldab	four_tid
 213 00fc BD 00 00    		bsr	presto_timer
 214 00ff 18 38       		puly
 215 0101 18 38       		puly
 216 0103 18 38       		puly
 217 0105 8F          		xgdx
 218 0106 30          		tsx
 219 0107 8F          		xgdx
 220 0108 BD 00 00    		bsr	presto_wait_for_message
 221 010b 20 D1       		bra	.L17
 222                 	.Lfe5:
 223                 		.size	Four,.Lfe5-Four
 224                 		; extern	presto_init
 225                 		; extern	presto_create_task
 226                 		; extern	presto_start_scheduler
 227                 		; extern	presto_fatal_error
 228                 		.globl	main
 229                 		.type	main,@function
 230                 	main:
 231 010d BD 00 00    		bsr	presto_init
 232 0110 C6 23       		ldab	#35
 233 0112 37          		pshb
 234 0113 34          		des
 235 0114 18 CE 01 00 		ldy	#256
 236 0118 18 3C       		pshy
 237 011a CE 00 00    		ldx	#task_one_stack
 238 011d 3C          		pshx
 239 011e CC 00 00    		ldd	#One
 240 0121 BD 00 00    		bsr	presto_create_task
 241 0124 18 38       		puly
 242 0126 18 38       		puly
 243 0128 18 38       		puly
 244 012a F7 00 00    		stab	one_tid
 245 012d C6 28       		ldab	#40
 246 012f 37          		pshb
 247 0130 34          		des
 248 0131 18 CE 01 00 		ldy	#256
 249 0135 18 3C       		pshy
 250 0137 CE 00 00    		ldx	#task_two_stack
 251 013a 3C          		pshx
 252 013b CC 00 00    		ldd	#Two
 253 013e BD 00 00    		bsr	presto_create_task
 254 0141 18 38       		puly
 255 0143 18 38       		puly
 256 0145 18 38       		puly
 257 0147 F7 00 00    		stab	two_tid
 258 014a C6 2D       		ldab	#45
 259 014c 37          		pshb
 260 014d 34          		des
 261 014e 18 CE 01 00 		ldy	#256
 262 0152 18 3C       		pshy
 263 0154 CE 00 00    		ldx	#task_three_stack
 264 0157 3C          		pshx
 265 0158 CC 00 00    		ldd	#Three
 266 015b BD 00 00    		bsr	presto_create_task
 267 015e 18 38       		puly
 268 0160 18 38       		puly
 269 0162 18 38       		puly
 270 0164 F7 00 00    		stab	three_tid
 271 0167 C6 32       		ldab	#50
 272 0169 37          		pshb
 273 016a 34          		des
 274 016b 18 CE 01 00 		ldy	#256
 275 016f 18 3C       		pshy
 276 0171 CE 00 00    		ldx	#task_four_stack
 277 0174 3C          		pshx
 278 0175 CC 00 00    		ldd	#Four
 279 0178 BD 00 00    		bsr	presto_create_task
 280 017b 18 38       		puly
 281 017d 18 38       		puly
 282 017f 18 38       		puly
 283 0181 F7 00 00    		stab	four_tid
 284 0184 BD 00 00    		bsr	presto_start_scheduler
 285 0187 C6 01       		ldab	#1
 286 0189 BD 00 00    		bsr	presto_fatal_error
 287 018c 4F          		clra
 288 018d 5F          		clrb
 289 018e 39          		rts
 290                 	.Lfe6:
 291                 		.size	main,.Lfe6-main
 292                 		.comm	task_one_stack,256,1
 293                 		.comm	task_two_stack,256,1
 294                 		.comm	task_three_stack,256,1
 295                 		.comm	task_four_stack,256,1
 296                 		.ident	"GCC: (GNU) 3.0.4 m68hc1x-20020922"
DEFINED SYMBOLS
                            *ABS*:00000000 test.c
C:\WIN98\TEMP\cczsligb.s:14     .data:00000000 one_tid
C:\WIN98\TEMP\cczsligb.s:19     .data:00000001 two_tid
C:\WIN98\TEMP\cczsligb.s:24     .data:00000002 three_tid
C:\WIN98\TEMP\cczsligb.s:29     .data:00000003 four_tid
C:\WIN98\TEMP\cczsligb.s:34     .data:00000004 light1
C:\WIN98\TEMP\cczsligb.s:39     .data:00000005 light2
C:\WIN98\TEMP\cczsligb.s:44     .data:00000006 light3
C:\WIN98\TEMP\cczsligb.s:49     .data:00000007 light4
C:\WIN98\TEMP\cczsligb.s:54     .text:00000000 assert_lights
C:\WIN98\TEMP\cczsligb.s:68     .text:0000001b .Lfe1
C:\WIN98\TEMP\cczsligb.s:74     .text:0000001b One
C:\WIN98\TEMP\cczsligb.s:84     .text:00000029 .L5
C:\WIN98\TEMP\cczsligb.s:108    .text:00000057 .Lfe2
C:\WIN98\TEMP\cczsligb.s:112    .text:00000057 Two
C:\WIN98\TEMP\cczsligb.s:122    .text:00000065 .L9
C:\WIN98\TEMP\cczsligb.s:146    .text:00000093 .Lfe3
C:\WIN98\TEMP\cczsligb.s:150    .text:00000093 Three
C:\WIN98\TEMP\cczsligb.s:160    .text:000000a1 .L13
C:\WIN98\TEMP\cczsligb.s:184    .text:000000d0 .Lfe4
C:\WIN98\TEMP\cczsligb.s:188    .text:000000d0 Four
C:\WIN98\TEMP\cczsligb.s:198    .text:000000de .L17
C:\WIN98\TEMP\cczsligb.s:222    .text:0000010d .Lfe5
C:\WIN98\TEMP\cczsligb.s:230    .text:0000010d main
                            *COM*:00000100 task_one_stack
                            *COM*:00000100 task_two_stack
                            *COM*:00000100 task_three_stack
                            *COM*:00000100 task_four_stack
C:\WIN98\TEMP\cczsligb.s:290    .text:0000018f .Lfe6

UNDEFINED SYMBOLS
presto_timer
presto_wait_for_message
presto_init
presto_create_task
presto_start_scheduler
presto_fatal_error
