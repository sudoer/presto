   1                 	;;;-----------------------------------------
   2                 	;;; Start MC68HC11 gcc assembly output
   3                 	;;; gcc compiler 3.0.4 m68hc1x-20020922
   4                 	;;; Command:	cc1 -lang-c -I\alan\play\hc11\presto -I. -iprefix c:\programs\hc11\gnu-m6811-elf\bin\.
   5                 	;;; Compiled:	Sat Oct 12 23:29:26 2002
   6                 	;;; (META)compiled by GNU C version 2.95.2 19991024 (release).
   7                 	;;;-----------------------------------------
   8                 		.file	"test.c"
   9                 		.mode mshort
  10                 		.globl	one_tid
  11                 		.sect	.data
  12                 		.type	one_tid,@object
  13                 		.size	one_tid,1
  14                 	one_tid:
  15 0000 00          		.byte	0
  16                 		.globl	two_tid
  17                 		.type	two_tid,@object
  18                 		.size	two_tid,1
  19                 	two_tid:
  20 0001 00          		.byte	0
  21                 		.globl	three_tid
  22                 		.type	three_tid,@object
  23                 		.size	three_tid,1
  24                 	three_tid:
  25 0002 00          		.byte	0
  26                 		.globl	four_tid
  27                 		.type	four_tid,@object
  28                 		.size	four_tid,1
  29                 	four_tid:
  30 0003 00          		.byte	0
  31                 		.globl	light1
  32                 		.type	light1,@object
  33                 		.size	light1,1
  34                 	light1:
  35 0004 00          		.byte	0
  36                 		.globl	light2
  37                 		.type	light2,@object
  38                 		.size	light2,1
  39                 	light2:
  40 0005 00          		.byte	0
  41                 		.globl	light3
  42                 		.type	light3,@object
  43                 		.size	light3,1
  44                 	light3:
  45 0006 00          		.byte	0
  46                 		.globl	light4
  47                 		.type	light4,@object
  48                 		.size	light4,1
  49                 	light4:
  50 0007 00          		.byte	0
  51                 		.sect	.text
  52                 		.globl	assert_lights
  53                 		.type	assert_lights,@function
  54                 	assert_lights:
  55 0000 34          		des
  56 0001 F6 00 00    		ldab	light1
  57 0004 FA 00 00    		orab	light2
  58 0007 FA 00 00    		orab	light3
  59 000a FA 00 00    		orab	light4
  60 000d CA F0       		orab	#240
  61 000f 30          		tsx
  62 0010 E7 00       		stab	0,x
  63 0012 E6 00       		ldab	0,x
  64 0014 CE 7F FF    		ldx	#32767
  65 0017 E7 00       		stab	0,x
  66 0019 31          		ins
  67 001a 39          		rts
  68                 	.Lfe1:
  69                 		.size	assert_lights,.Lfe1-assert_lights
  70                 		; extern	presto_timer
  71                 		; extern	presto_wait_for_message
  72                 		.globl	One
  73                 		.type	One,@function
  74                 	One:
  75 001b 3C          		pshx
  76 001c 3C          		pshx
  77 001d 18 30       		tsy
  78 001f 4F          		clra
  79 0020 5F          		clrb
  80 0021 18 ED 02    		std	2,y
  81 0024 4F          		clra
  82 0025 5F          		clrb
  83 0026 18 ED 00    		std	0,y
  84                 	.L5:
  85 0029 F6 00 00    		ldab	light1
  86 002c C8 01       		eorb	#1
  87 002e F7 00 00    		stab	light1
  88 0031 8D CD       		bsr	assert_lights
  89 0033 18 30       		tsy
  90 0035 18 EC 02    		ldd	2,y
  91 0038 37          		pshb
  92 0039 36          		psha
  93 003a 18 EC 00    		ldd	0,y
  94 003d 37          		pshb
  95 003e 36          		psha
  96 003f CE 00 AF    		ldx	#175
  97 0042 3C          		pshx
  98 0043 F6 00 00    		ldab	one_tid
  99 0046 BD 00 00    		bsr	presto_timer
 100 0049 18 38       		puly
 101 004b 18 38       		puly
 102 004d 18 38       		puly
 103 004f 8F          		xgdx
 104 0050 30          		tsx
 105 0051 8F          		xgdx
 106 0052 BD 00 00    		bsr	presto_wait_for_message
 107 0055 20 D2       		bra	.L5
 108                 	.Lfe2:
 109                 		.size	One,.Lfe2-One
 110                 		.globl	Two
 111                 		.type	Two,@function
 112                 	Two:
 113 0057 3C          		pshx
 114 0058 3C          		pshx
 115 0059 18 30       		tsy
 116 005b 4F          		clra
 117 005c 5F          		clrb
 118 005d 18 ED 02    		std	2,y
 119 0060 4F          		clra
 120 0061 5F          		clrb
 121 0062 18 ED 00    		std	0,y
 122                 	.L9:
 123 0065 F6 00 00    		ldab	light2
 124 0068 C8 02       		eorb	#2
 125 006a F7 00 00    		stab	light2
 126 006d 8D 91       		bsr	assert_lights
 127 006f 18 30       		tsy
 128 0071 18 EC 02    		ldd	2,y
 129 0074 37          		pshb
 130 0075 36          		psha
 131 0076 18 EC 00    		ldd	0,y
 132 0079 37          		pshb
 133 007a 36          		psha
 134 007b CE 00 FA    		ldx	#250
 135 007e 3C          		pshx
 136 007f F6 00 00    		ldab	two_tid
 137 0082 BD 00 00    		bsr	presto_timer
 138 0085 18 38       		puly
 139 0087 18 38       		puly
 140 0089 18 38       		puly
 141 008b 8F          		xgdx
 142 008c 30          		tsx
 143 008d 8F          		xgdx
 144 008e BD 00 00    		bsr	presto_wait_for_message
 145 0091 20 D2       		bra	.L9
 146                 	.Lfe3:
 147                 		.size	Two,.Lfe3-Two
 148                 		.globl	Three
 149                 		.type	Three,@function
 150                 	Three:
 151 0093 3C          		pshx
 152 0094 3C          		pshx
 153 0095 18 30       		tsy
 154 0097 4F          		clra
 155 0098 5F          		clrb
 156 0099 18 ED 02    		std	2,y
 157 009c 4F          		clra
 158 009d 5F          		clrb
 159 009e 18 ED 00    		std	0,y
 160                 	.L13:
 161 00a1 F6 00 00    		ldab	light3
 162 00a4 C8 04       		eorb	#4
 163 00a6 F7 00 00    		stab	light3
 164 00a9 BD 00 00    		bsr	assert_lights
 165 00ac 18 30       		tsy
 166 00ae 18 EC 02    		ldd	2,y
 167 00b1 37          		pshb
 168 00b2 36          		psha
 169 00b3 18 EC 00    		ldd	0,y
 170 00b6 37          		pshb
 171 00b7 36          		psha
 172 00b8 CE 01 4D    		ldx	#333
 173 00bb 3C          		pshx
 174 00bc F6 00 00    		ldab	three_tid
 175 00bf BD 00 00    		bsr	presto_timer
 176 00c2 18 38       		puly
 177 00c4 18 38       		puly
 178 00c6 18 38       		puly
 179 00c8 8F          		xgdx
 180 00c9 30          		tsx
 181 00ca 8F          		xgdx
 182 00cb BD 00 00    		bsr	presto_wait_for_message
 183 00ce 20 D1       		bra	.L13
 184                 	.Lfe4:
 185                 		.size	Three,.Lfe4-Three
 186                 		.globl	Four
 187                 		.type	Four,@function
 188                 	Four:
 189 00d0 3C          		pshx
 190 00d1 3C          		pshx
 191 00d2 18 30       		tsy
 192 00d4 4F          		clra
 193 00d5 5F          		clrb
 194 00d6 18 ED 02    		std	2,y
 195 00d9 4F          		clra
 196 00da 5F          		clrb
 197 00db 18 ED 00    		std	0,y
 198                 	.L17:
 199 00de F6 00 00    		ldab	light4
 200 00e1 C8 08       		eorb	#8
 201 00e3 F7 00 00    		stab	light4
 202 00e6 BD 00 00    		bsr	assert_lights
 203 00e9 18 30       		tsy
 204 00eb 18 EC 02    		ldd	2,y
 205 00ee 37          		pshb
 206 00ef 36          		psha
 207 00f0 18 EC 00    		ldd	0,y
 208 00f3 37          		pshb
 209 00f4 36          		psha
 210 00f5 CE 01 F4    		ldx	#500
 211 00f8 3C          		pshx
 212 00f9 F6 00 00    		ldab	four_tid
 213 00fc BD 00 00    		bsr	presto_timer
 214 00ff 18 38       		puly
 215 0101 18 38       		puly
 216 0103 18 38       		puly
 217 0105 8F          		xgdx
 218 0106 30          		tsx
 219 0107 8F          		xgdx
 220 0108 BD 00 00    		bsr	presto_wait_for_message
 221 010b 20 D1       		bra	.L17
 222                 	.Lfe5:
 223                 		.size	Four,.Lfe5-Four
 224                 		; extern	presto_init
 225                 		; extern	presto_create_task
 226                 		; extern	presto_start_scheduler
 227                 		; extern	presto_fatal_error
 228                 		.globl	main
 229                 		.type	main,@function
 230                 	main:
 231 010d 7F 00 00    		clr	one_tid
 232 0110 7F 00 00    		clr	two_tid
 233 0113 7F 00 00    		clr	three_tid
 234 0116 7F 00 00    		clr	four_tid
 235 0119 7F 00 00    		clr	light1
 236 011c 7F 00 00    		clr	light2
 237 011f 7F 00 00    		clr	light3
 238 0122 7F 00 00    		clr	light4
 239 0125 BD 00 00    		bsr	presto_init
 240 0128 C6 23       		ldab	#35
 241 012a 37          		pshb
 242 012b 34          		des
 243 012c 18 CE 01 00 		ldy	#256
 244 0130 18 3C       		pshy
 245 0132 CE 00 00    		ldx	#task_one_stack
 246 0135 3C          		pshx
 247 0136 CC 00 00    		ldd	#One
 248 0139 BD 00 00    		bsr	presto_create_task
 249 013c 18 38       		puly
 250 013e 18 38       		puly
 251 0140 18 38       		puly
 252 0142 F7 00 00    		stab	one_tid
 253 0145 C6 28       		ldab	#40
 254 0147 37          		pshb
 255 0148 34          		des
 256 0149 18 CE 01 00 		ldy	#256
 257 014d 18 3C       		pshy
 258 014f CE 00 00    		ldx	#task_two_stack
 259 0152 3C          		pshx
 260 0153 CC 00 00    		ldd	#Two
 261 0156 BD 00 00    		bsr	presto_create_task
 262 0159 18 38       		puly
 263 015b 18 38       		puly
 264 015d 18 38       		puly
 265 015f F7 00 00    		stab	two_tid
 266 0162 C6 2D       		ldab	#45
 267 0164 37          		pshb
 268 0165 34          		des
 269 0166 18 CE 01 00 		ldy	#256
 270 016a 18 3C       		pshy
 271 016c CE 00 00    		ldx	#task_three_stack
 272 016f 3C          		pshx
 273 0170 CC 00 00    		ldd	#Three
 274 0173 BD 00 00    		bsr	presto_create_task
 275 0176 18 38       		puly
 276 0178 18 38       		puly
 277 017a 18 38       		puly
 278 017c F7 00 00    		stab	three_tid
 279 017f C6 32       		ldab	#50
 280 0181 37          		pshb
 281 0182 34          		des
 282 0183 18 CE 01 00 		ldy	#256
 283 0187 18 3C       		pshy
 284 0189 CE 00 00    		ldx	#task_four_stack
 285 018c 3C          		pshx
 286 018d CC 00 00    		ldd	#Four
 287 0190 BD 00 00    		bsr	presto_create_task
 288 0193 18 38       		puly
 289 0195 18 38       		puly
 290 0197 18 38       		puly
 291 0199 F7 00 00    		stab	four_tid
 292 019c BD 00 00    		bsr	presto_start_scheduler
 293 019f CC 00 01    		ldd	#1
 294 01a2 BD 00 00    		bsr	presto_fatal_error
 295 01a5 4F          		clra
 296 01a6 5F          		clrb
 297 01a7 39          		rts
 298                 	.Lfe6:
 299                 		.size	main,.Lfe6-main
 300                 		.comm	task_one_stack,256,1
 301                 		.comm	task_two_stack,256,1
 302                 		.comm	task_three_stack,256,1
 303                 		.comm	task_four_stack,256,1
 304                 		.ident	"GCC: (GNU) 3.0.4 m68hc1x-20020922"
DEFINED SYMBOLS
                            *ABS*:00000000 test.c
C:\WIN98\TEMP\cc31qjgb.s:14     .data:00000000 one_tid
C:\WIN98\TEMP\cc31qjgb.s:19     .data:00000001 two_tid
C:\WIN98\TEMP\cc31qjgb.s:24     .data:00000002 three_tid
C:\WIN98\TEMP\cc31qjgb.s:29     .data:00000003 four_tid
C:\WIN98\TEMP\cc31qjgb.s:34     .data:00000004 light1
C:\WIN98\TEMP\cc31qjgb.s:39     .data:00000005 light2
C:\WIN98\TEMP\cc31qjgb.s:44     .data:00000006 light3
C:\WIN98\TEMP\cc31qjgb.s:49     .data:00000007 light4
C:\WIN98\TEMP\cc31qjgb.s:54     .text:00000000 assert_lights
C:\WIN98\TEMP\cc31qjgb.s:68     .text:0000001b .Lfe1
C:\WIN98\TEMP\cc31qjgb.s:74     .text:0000001b One
C:\WIN98\TEMP\cc31qjgb.s:84     .text:00000029 .L5
C:\WIN98\TEMP\cc31qjgb.s:108    .text:00000057 .Lfe2
C:\WIN98\TEMP\cc31qjgb.s:112    .text:00000057 Two
C:\WIN98\TEMP\cc31qjgb.s:122    .text:00000065 .L9
C:\WIN98\TEMP\cc31qjgb.s:146    .text:00000093 .Lfe3
C:\WIN98\TEMP\cc31qjgb.s:150    .text:00000093 Three
C:\WIN98\TEMP\cc31qjgb.s:160    .text:000000a1 .L13
C:\WIN98\TEMP\cc31qjgb.s:184    .text:000000d0 .Lfe4
C:\WIN98\TEMP\cc31qjgb.s:188    .text:000000d0 Four
C:\WIN98\TEMP\cc31qjgb.s:198    .text:000000de .L17
C:\WIN98\TEMP\cc31qjgb.s:222    .text:0000010d .Lfe5
C:\WIN98\TEMP\cc31qjgb.s:230    .text:0000010d main
                            *COM*:00000100 task_one_stack
                            *COM*:00000100 task_two_stack
                            *COM*:00000100 task_three_stack
                            *COM*:00000100 task_four_stack
C:\WIN98\TEMP\cc31qjgb.s:298    .text:000001a8 .Lfe6

UNDEFINED SYMBOLS
presto_timer
presto_wait_for_message
presto_init
presto_create_task
presto_start_scheduler
presto_fatal_error
